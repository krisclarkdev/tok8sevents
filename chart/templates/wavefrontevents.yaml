apiVersion: v1
kind: Pod
metadata:
  name: pre-install-hook-pod
  annotations:
    "helm.sh/hook": pre-install
    "helm.sh/hook-delete-policy": hook-succeeded
spec:
  containers:
  - name: wfeventcreator
    image: capkenr/tok8sevents
    env:
    - name: URL
      valueFrom:
        secretKeyRef:
          name: wavefront-token
          key: url
    - name: TOKEN
      valueFrom:
        secretKeyRef:
          name: wavefront-token
          key: token
    - name: CHARTNAME
      value: "{{ .Chart.Name }}"
    - name: CHARTVERSION
      value: "{{ .Chart.Version }}"
    - name: EVENTNAME
      value: "{{ .Chart.Name }}-{{ .Chart.Version }}"
    - name: SEVERITY
      value: "info"
    - name: DETAILS
      value: "This was generated from a Helm install of {{ .Chart.Name }}."
    - name: TAGS
      value: "helm,k8s,install,{{ .Release.Name }},{{ .Chart.Name }}"
    - name: CREATEEVENT
      value: "1"
    imagePullPolicy: Always
  restartPolicy: Never
  terminationGracePeriodSeconds: 0
---
apiVersion: v1
kind: Pod
metadata:
  name: pre-delete-hook-pod
  annotations:
    "helm.sh/hook": pre-delete
    "helm.sh/hook-delete-policy": hook-succeeded
spec:
  containers:
  - name: wfeventcreator
    image: capkenr/tok8sevents
    env:
    - name: URL
      valueFrom:
        secretKeyRef:
          name: wavefront-token
          key: url
    - name: TOKEN
      valueFrom:
        secretKeyRef:
          name: wavefront-token
          key: token
    - name: CHARTNAME
      value: "{{ .Chart.Name }}"
    - name: CHARTVERSION
      value: "{{ .Chart.Version }}"
    - name: EVENTNAME
      value: "{{ .Chart.Name }}-{{ .Chart.Version }}"
    - name: SEVERITY
      value: "info"
    - name: DETAILS
      value: "This was generated from a Helm delete of {{ .Chart.Name }}."
    - name: TAGS
      value: "helm,k8s,delete,{{ .Release.Name }},{{ .Chart.Name }}"
    - name: CREATEEVENT
      value: "1"
    imagePullPolicy: Always
  restartPolicy: Never
  terminationGracePeriodSeconds: 0
---
apiVersion: v1
kind: Pod
metadata:
  name: pre-upgrade-hook-pod
  annotations:
    "helm.sh/hook": pre-upgrade
    "helm.sh/hook-delete-policy": hook-succeeded
spec:
  containers:
  - name: wfeventcreator
    image: capkenr/tok8sevents
    env:
    - name: URL
      valueFrom:
        secretKeyRef:
          name: wavefront-token
          key: url
    - name: TOKEN
      valueFrom:
        secretKeyRef:
          name: wavefront-token
          key: token
    - name: CHARTNAME
      value: "{{ .Chart.Name }}"
    - name: CHARTVERSION
      value: "{{ .Chart.Version }}"
    - name: EVENTNAME
      value: "{{ .Chart.Name }}-{{ .Chart.Version }}"
    - name: SEVERITY
      value: "info"
    - name: DETAILS
      value: "This was generated from a Helm upgrade of {{ .Chart.Name }}."
    - name: TAGS
      value: "helm,k8s,upgrade,{{ .Release.Name }},{{ .Chart.Name }}"
    - name: CREATEEVENT
      value: "1"
    imagePullPolicy: Always
  restartPolicy: Never
  terminationGracePeriodSeconds: 0
---
apiVersion: v1
kind: Pod
metadata:
  name: pre-rollback-hook-pod
  annotations:
    "helm.sh/hook": pre-rollback
    "helm.sh/hook-delete-policy": hook-succeeded
spec:
  containers:
  - name: wfeventcreator
    image: capkenr/tok8sevents
    env:
    - name: URL
      valueFrom:
        secretKeyRef:
          name: wavefront-token
          key: url
    - name: TOKEN
      valueFrom:
        secretKeyRef:
          name: wavefront-token
          key: token
    - name: CHARTNAME
      value: "{{ .Chart.Name }}"
    - name: CHARTVERSION
      value: "{{ .Chart.Version }}"
    - name: EVENTNAME
      value: "{{ .Chart.Name }}-{{ .Chart.Version }}"
    - name: SEVERITY
      value: "info"
    - name: DETAILS
      value: "This was generated from a Helm rollback of {{ .Chart.Name }}."
    - name: TAGS
      value: "helm,k8s,rollback,{{ .Release.Name }},{{ .Chart.Name }}"
    - name: CREATEEVENT
      value: "1"
    imagePullPolicy: Always
  restartPolicy: Never
  terminationGracePeriodSeconds: 0
---
apiVersion: v1
kind: Pod
metadata:
  name: post-install-hook-pod
  annotations:
    "helm.sh/hook": post-install
    "helm.sh/hook-delete-policy": hook-succeeded
spec:
  containers:
  - name: wfeventcreator
    image: capkenr/tok8sevents
    env:
    - name: URL
      valueFrom:
        secretKeyRef:
          name: wavefront-token
          key: url
    - name: TOKEN
      valueFrom:
        secretKeyRef:
          name: wavefront-token
          key: token
    - name: EVENTNAME
      value: "{{ .Chart.Name }}-{{ .Chart.Version }}"
    - name: ENDEVENT
      value: "1"
    imagePullPolicy: Always
  restartPolicy: Never
  terminationGracePeriodSeconds: 0
---
apiVersion: v1
kind: Pod
metadata:
  name: post-delete-hook-pod
  annotations:
    "helm.sh/hook": post-delete
    "helm.sh/hook-delete-policy": hook-succeeded
spec:
  containers:
  - name: wfeventcreator
    image: capkenr/tok8sevents
    env:
    - name: URL
      valueFrom:
        secretKeyRef:
          name: wavefront-token
          key: url
    - name: TOKEN
      valueFrom:
        secretKeyRef:
          name: wavefront-token
          key: token
    - name: EVENTNAME
      value: "{{ .Chart.Name }}-{{ .Chart.Version }}"
    - name: ENDEVENT
      value: "1"
    imagePullPolicy: Always
  restartPolicy: Never
  terminationGracePeriodSeconds: 0
---
apiVersion: v1
kind: Pod
metadata:
  name: post-upgrade-hook-pod
  annotations:
    "helm.sh/hook": post-upgrade
    "helm.sh/hook-delete-policy": hook-succeeded
spec:
  containers:
  - name: wfeventcreator
    image: capkenr/tok8sevents
    env:
    - name: URL
      valueFrom:
        secretKeyRef:
          name: wavefront-token
          key: url
    - name: TOKEN
      valueFrom:
        secretKeyRef:
          name: wavefront-token
          key: token
    - name: EVENTNAME
      value: "{{ .Chart.Name }}-{{ .Chart.Version }}"
    - name: ENDEVENT
      value: "1"
    imagePullPolicy: Always
  restartPolicy: Never
  terminationGracePeriodSeconds: 0
---
apiVersion: v1
kind: Pod
metadata:
  name: post-rollback-hook-pod
  annotations:
    "helm.sh/hook": post-rollback
    "helm.sh/hook-delete-policy": hook-succeeded
spec:
  containers:
  - name: wfeventcreator
    image: capkenr/tok8sevents
    env:
    - name: URL
      valueFrom:
        secretKeyRef:
          name: wavefront-token
          key: url
    - name: TOKEN
      valueFrom:
        secretKeyRef:
          name: wavefront-token
          key: token
    - name: EVENTNAME
      value: "{{ .Chart.Name }}-{{ .Chart.Version }}"
    - name: ENDEVENT
      value: "1"
    imagePullPolicy: Always
  restartPolicy: Never
  terminationGracePeriodSeconds: 0